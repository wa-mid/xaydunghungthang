(function(){var n="0.2.1",t,a="undefined",e=25,r=parseInt(1e3/e),i=t,o={"function":!0,object:!0},s={DEBUG_MODE:!1,counterID:"509",instanceID:"externalConf###Instanceid"},c=function(n){return typeof n!==a},u="HISTATS_CANVAS_DEBUG_ON";s.DEBUG_MODE=c(window[u])&&1==window[u];var d=function(){return s.instanceID},f="_HistatsCounterGraphics_",A,l=function(){return f+s.counterID},g=function(n){return!("string"!=typeof n||""==n)},h=function(){try{s.DEBUG_MODE&&c(console)&&console.log.apply(this,arguments)}catch(n){}},m=function(a,e){var o=a||{};try{var u=function(n){var t="autostart";return"undefined"!=typeof n[t]&&n[t]===!0},d={ANIMATION_RUNNING_STATUS:!0,ANIMATION_STARTED:!1,AUTOSTART:u(o),_STOPPED:!1,INSTANCE_ID:"-"+parseInt(1e4*Math.random())},f=function(){return d.INSTANCE_ID},g=100,m=1,v=function(){return e.document},p=function(n){return c(n)&&!!v().getElementById(n)},b=function(n){i=e.setTimeout(n,r)},w=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||e.oRequestAnimationFrame||b,T=e["Date"]||{},I=function(n,t){for(var a in n)t.hasOwnProperty(a)&&(t[a]=n[a])};o.getInstanceID=f;var C=l();o.IS_HISTATS_CANVAS=!0,o.globalObjectName=C,o.$window=e;var E=function(n){return p(n)?v().getElementById(n):t},S={w:0,h:0,yBase:0,xBase:0,hasShadow:!1,hasLabel:!1,shadowOffsetX:2,shadowOffsetY:2,shadowBlur:1,doMouseOverOut:1},N={msLastFrameDrawn:0,msPerFrame:r,frameCounter:0,isInAnimationTransition:!1,animation_duration_inFrames:20,waitframesBetweenTwoAnimations:80,framesBetweenTwoAnimations:100,currentLoopFrame:0,autoTriggerTextChange_onFrame:t,customization:{}},O={domCanvasObject:null,canvas2dContext:null,canvasProperties:S},x=function(){var n={},a=n.hasOwnProperty,e=0,r=0,i={blockMessages:!1,recordMessages:!1,messageLog:[],printMessages:!1,messagePassedCount:0,subscribersCount:0,topicsCount:0,_topics:n},o=function(t){return a.call(n,t)},s=function(t){return i.printMessages&&console.log(f(),"addTopic",t),r++,i.topicsCount++,r>50&&h(f(),"Lot of topics registered!",t),n[t]=[]},c=function(t){return n[t]},u=function(t,a,r){i.printMessages&&console.log(f(),"subscribe",t,a,r),i.recordMessages&&i.messageLog.push(["subscribe",t,a,r]),r=r||g,o(t)||s(t);var u=c(t).push({callback:a,priority:a})-1;return e++,i.subscribersCount++,e>50&&h(f(),"Lot of topics registered!",t),{remove:function(){delete n[t][u]}}},d=function(n,t){var a="no-topic-found";n!=a&&A(a,{topic:n,info:t})},A=function(a,e){if(i.messagePassedCount++,i.printMessages&&console.log(f(),"publish",a,e),i.recordMessages&&i.messageLog.push(["publish",a,e]),!i.blockMessages)return o(a)?(n[a].slice().sort(function(n,t){return n.priority-t.priority}).forEach(function(n){n.callback(e!=t?e:{})}),void 0):(d(a,e),void 0)},l=function(n,t){w(function(){A(n,t)})};return{subscribe:u,publish:A,publishAsync:l,debugObj:i}}(),U=function(){return s.counterID},_=function(){var n="siteId";return o[n]=o[n]||0},y=function(){var n="main_div_name";return o[n]||"histats_counter_"+_()+"_"+U()},R=[],B=function(){return A=y(),A},M=function(){return B()+"_canvas"},P=function(){return"http://www.histats.com/viewstats/?sid="+_()+"&ccid="+U()},k=function(){e.location=P()},D=function(){if(1==O.canvasProperties.doMouseOverOut){var n=q().canvasProperties;n.yBase=2,n.xBase=2,n.shadowOffsetX=0,n.shadowOffsetY=0}q().domCanvasObject.style.cursor="pointer"},F=function(){if(1==O.canvasProperties.doMouseOverOut){var n=q().canvasProperties;n.yBase=0,n.xBase=0,n.shadowOffsetX=2,n.shadowOffsetY=2}},L=function(){var n=q(),t=n.canvasProperties,a=n.canvas2dContext;a.shadowOffsetX=t.shadowOffsetX,a.shadowOffsetY=t.shadowOffsetY,a.shadowBlur=t.shadowBlur,a.shadowColor="rgba(0,0,0,0.2)"},V=function(){return E(B())},j=function(){var n=!!V();return n},Y=function(){try{if(!j())return x.publish("error",{msg:"validateDomcontainer not found"}),void 0;var n=V(),t=q().canvasProperties,a='<canvas id="'+M()+'" width="'+t.w+'" height="'+t.h+'" ></canvas>',r='<a href="'+P()+'" target="_blank">'+a+"</a>";n.innerHTML=r,q().domCanvasObject=E(M());var i=q().domCanvasObject;q().canvas2dContext=i.getContext("2d"),"addEventListener"in e?(i.addEventListener("mouseover",function(){D()}),i.addEventListener("mouseout",function(){F()})):i.onclick=function(){k()}}catch(o){h(f(),"drawCanvas",o)}},G=function(){try{if(d.ANIMATION_STARTED)return;if(d._STOPPED)return;x.publish("draw-callback-requested-reconfiguration",{}),x.publish("starting_pre",{context:o}),d.ANIMATION_STARTED=!0,x.publish("started",{context:o}),x.publish("drawcanvas_pre",{context:o}),Y(),x.publish("drawcanvas_post",{context:o}),K(),x.publish("animationLoop_started",{context:o})}catch(n){h(f(),"startNow",n,n.message)}},Q=function(n,t,a){t.addEventListener?t.addEventListener(n,a,!1):t.attachEvent?t.attachEvent("on"+n,a):t[n]=a},X=function(){try{x.publish("appendedStart",{context:o,type:"animFrame"}),w(G)}catch(n){h(f(),"startAsap",n.message,n)}},z=function(n,t){R.push({name:n,callback:t})},H=function(){},J=function(){R.forEach(function(n){n.callback(o.getCanvas2dContext(),N,q())})},W=function(){c(i)&&e.clearTimeout(i)},K=function(){d._STOPPED||w(function(){tn(J),d.ANIMATION_RUNNING_STATUS&&K()})};x.subscribe("setAnimationProperties",function(n){I(n,N)}),x.subscribe("draw-callback-publish-reconfiguration",function(n){try{n.canvasCallbacks.forEach(function(n){R.push({name:n.name,callback:n.cb,priority:n.priority})}),R=R.slice().sort(function(n,t){return n.priority-t.priority})}catch(t){h(f(),"animationLoop",t.message,t)}}),x.subscribe("configuration-changed",function(n){R=[],x.publish("draw-callback-requested-reconfiguration",{})});var Z=function(n){var t=n!=d.ANIMATION_RUNNING_STATUS;return t&&(0==d.ANIMATION_RUNNING_STATUS&&1==n,1==d.ANIMATION_RUNNING_STATUS&&0==n&&W(),d.ANIMATION_RUNNING_STATUS=n),t},q=function(){return O},$=function(){var n=!1;0==N.frameCounter&&x.publish("FIRST-FRAME",{});var t=T.now(),a=t-N.msLastFrameDrawn;if(a>N.msPerFrame){var e=a%N.msPerFrame;N.msLastFrameDrawn=t-e,n=!0}return n},nn=function(){if(!(N.animation_duration_inFrames<1)){var n=N.animation_duration_inFrames+N.waitframesBetweenTwoAnimations;N.currentLoopFrame=N.frameCounter%n;var t=0==N.currentLoopFrame,a=N.currentLoopFrame>=N.animation_duration_inFrames;t&&(N.isInAnimationTransition=!0,x.publish("drawing-triggered-animation-start",N)),a&&N.isInAnimationTransition&&(N.isInAnimationTransition=!1,x.publish("drawing-triggered-animation-end",N))}},tn=function(n){var t=$();t&&(N.frameCounter++,nn(),n())},an=function(n){return n(o.getCanvas2dContext())},en=function(){var n=17,t=2,a=1,e=q().canvasProperties,r=0;e.hasShadow&&(r=r+t+a),e.hasLabel&&(e.h=e.h+n),e.w=e.w+r,e.h=e.h+r},rn=function(n){I(n,q().canvasProperties),en()};x.subscribe("setCanvasProperties",rn,10);var on=function(){o.onCanvas2dContext(function(n){var t=q().canvasProperties;n.clearRect(0,0,t.w,t.h),t.hasShadow&&L()})};x.subscribe("clear-canvas-rectangle",on,10);var sn=function(n,t){q().hasShadow&&(n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0,n.shadowColor="transparent")},cn=function(n,a){a.autoTriggerTextChange_onFrame!==t&&a.currentLoopFrame==a.autoTriggerTextChange_onFrame&&x.publish("drawing-change-text",{})},un=function(n){x.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:sn,priority:14,name:"stopApplyingShadowOnCanvas"},{cb:cn,priority:5,name:"autoUpdateText"}]})};x.subscribe("draw-callback-requested-reconfiguration",un,15),o.__CODE_VERSION=n,o.getCanvasObject=q,o.getCanvas2dContext=function(){return q().canvas2dContext},o.onCanvas2dContext=an,o.getXYCanvas=function(){return{x:q().canvasProperties.xBase,y:q().canvasProperties.yBase}},o.addDrawCallback=z,o.getCanvasProperties=function(){return q().canvasProperties},o.setCanvasProperties=function(n){for(var t in n)n.hasOwnProperty(t)&&(O.canvasProperties[t]=n[t])},o.updateCanvasProperties=function(n){o.setCanvasProperties(n(q().canvasProperties))},o.getAnimationFrames=function(){return N.frameCounter},o.getAnimationControl=function(){return N},o.setAnimationControl=function(n){for(var t in n)n.hasOwnProperty(t)&&(N[t]=n[t])},o.start=X,o.changeRunningStatus=Z,o.getRunningStatus=function(){return d.ANIMATION_RUNNING_STATUS},o.eventBus=x,o.getDebugMode=function(){return s.DEBUG_MODE},function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var t=n.effectLightLine={},a=function(n,t){e.colorStops.push({position:n,colour:t})},e={x:0,y:0,width:0,height:0,colorStops:[]},r=function(n){var t=n.createLinearGradient(e.x,e.y,e.x+e.width,e.y);e.colorStops.forEach(function(n){t.addColorStop(n.position,n.colour)}),n.fillStyle=t,n.fillRect(e.x,e.y,e.width,e.height)};t.addColorStop=a,t.draw=r,t.getProperties=function(){return e},t.setProperties=function(n,t,a,r){e.x=n,e.y=t,e.width=a,e.height=r}}.call(o),function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var a={main:"",source:t,loaded:!1};a.main="data:image/png;base64,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";var e=function(t){var e=a.source=new Image;e.onload=function(){a.loaded=!0,n.eventBus.publish("background-image-loaded",a),n.eventBus.publish("configuration-changed",{})},e.src=a.main};n.eventBus.subscribe("FIRST-FRAME",e,5),n.image_base64_src=a}.call(o),function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var a=n.counter={};a.ID="509",a.properties={w:72,h:17,hasShadow:!0};var e=!1,r={backgroundImageObject:t},i={animation_duration_inFrames:20,autoTriggerTextChange_onFrame:10,waitframesBetweenTwoAnimations:110};n.eventBus.publish("setCanvasProperties",a.properties),n.eventBus.publish("setAnimationProperties",i);var o={light:{x:0,y:0,w:10,h:16,movementsPerFrame:1,xStart:0,xEnd:65}},s=function(n){var t=o;t.light.movementsPerFrame=(o.light.xEnd-o.light.xStart)/i.animation_duration_inFrames};s(i.animation_duration_inFrames);var c=function(t){var a=o,e=n.getXYCanvas();a.light.x+=a.light.movementsPerFrame;var r=t.createLinearGradient(e.x+a.light.x,e.y+a.light.y,e.x+a.light.x+a.light.w,e.y+a.light.y);r.addColorStop(0,"rgba(255,255,255,0)"),r.addColorStop(.5,"rgba(255,255,255,1)"),r.addColorStop(1,"rgba(255,255,255,0)"),t.fillStyle=r,t.fillRect(e.x+a.light.x,e.y+a.light.y,a.light.w,a.light.h)},u=function(t,a){n.eventBus.publish("clear-canvas-rectangle",{});var e=n.getXYCanvas();t.drawImage(r.backgroundImageObject.source,e.x,e.y)},d=function(n,t){var a=o;t.isInAnimationTransition?c(n):a.light.x=a.light.xStart},f=function(a){r.backgroundImageObject!=t&&n.eventBus.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:u,priority:10,name:"drawBackground"},{cb:d,priority:17,name:"executeAnimationTransition"}]})};return n.eventBus.subscribe("draw-callback-requested-reconfiguration",f,13),n.eventBus.subscribe("background-image-loaded",function(n){r.backgroundImageObject=n},13),n}.call(o),d.AUTOSTART&&o.start()}catch(dn){}return o},v="base.js",p=window,b="_DEBUG_HISTATSCANVAS_RETURN_BUILDER";_value_RETURN_BUILDER=c(window[b])&&window[b]===!0,window[l()]=m,window["histats_canvascounters_"+v]=m}).call(this);